# =============================================================================
# RAILWAY.TOML - Root Configuration
# =============================================================================
# A.B.E.L. Project - Points Railway to the backend folder
# =============================================================================

[build]
builder = "nixpacks"
buildCommand = "cd backend && pip install poetry && poetry config virtualenvs.create false && poetry install --no-dev"
watchPatterns = ["backend/**"]

[deploy]
startCommand = "cd backend && gunicorn app.main:app --workers 4 --worker-class uvicorn.workers.UvicornWorker --bind 0.0.0.0:$PORT"
healthcheckPath = "/health"
healthcheckTimeout = 100
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 3
